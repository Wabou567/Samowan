<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Samawon</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body, html {
      width: 100%;
      height: 100%;
      background: #000;
      color: #eee;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow: hidden;
    }

    /* --- Ø´Ø±ÙŠØ· Ø§Ø³Ù… Ø¹Ù„ÙˆÙŠ ØµØºÙŠØ± ÙˆÙ…Ø¯ÙˆØ± --- */
    .header-banner {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      height: 36px;
      padding: 0 16px;
      background: rgba(30, 60, 114, 0.9);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 101;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 1px;
      backdrop-filter: blur(10px);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.2);
    }

    /* --- Ø­Ø§ÙˆÙŠØ§Øª Ø§Ù„ØµÙÙˆÙ --- */
    .rows-container {
      position: fixed;
      top: 70px;
      left: 0;
      width: 100%;
      height: calc(100% - 80px);
      overflow-y: auto;
      z-index: 96;
      padding: 0;
    }

    .rows-container::-webkit-scrollbar {
      width: 6px;
    }

    .rows-container::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.05);
    }

    .rows-container::-webkit-scrollbar-thumb {
      background: #555;
      border-radius: 10px;
    }

    /* --- ÙƒÙ„ ØµÙ Ø£ÙÙ‚ÙŠ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ --- */
    .row {
      display: flex;
      overflow-x: auto;
      gap: 12px;
      padding: 10px 20px 15px;
      margin-bottom: 10px;
      scroll-snap-type: x mandatory;
      scrollbar-width: thin;
      scrollbar-color: #3498db #111;
    }

    .row::-webkit-scrollbar {
      height: 6px;
    }

    .row::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
    }

    .row::-webkit-scrollbar-thumb {
      background: #3498db;
      border-radius: 10px;
    }

    /* --- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù†ØªØ¬ --- */
    .product-card {
      min-width: 180px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 14px;
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      scroll-snap-align: start;
      position: relative;
      overflow: hidden;
    }

    .product-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
      background: rgba(255, 255, 255, 0.12);
    }

    /* --- ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© --- */
    .product-image {
      width: 100%;
      height: 100px;
      background-size: cover;
      background-position: center;
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .product-card h4 {
      color: #fff;
      font-size: 15px;
      margin-bottom: 6px;
      font-weight: 600;
    }

    .product-card p {
      color: #bbb;
      font-size: 12px;
      margin: 4px 0;
    }

    .price {
      color: #2ecc71;
      font-weight: bold;
      font-size: 14px;
    }

    .rating {
      color: #f39c12;
      font-size: 12px;
    }

    /* --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ù†Ø¬ÙˆÙ…) --- */
    .stars {
      display: flex;
      margin-top: 4px;
    }

    .stars span {
      color: #f39c12;
      font-size: 14px;
      margin-left: 2px;
    }

    /* --- Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ (Ø§Ù„Ø¢Ù† ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·) --- */
    .slider-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 65%;
      max-width: 600px;
      height: 320px;
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.4);
      z-index: 90;
      background: #111;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .single-image {
      width: 100%;
      height: 100%;
      background-image: url('https://images.unsplash.com/photo-1607746882042-944635dfe10e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=800&q=90');
      background-size: cover;
      background-position: center;
      position: relative;
    }

    .single-image::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(45deg, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.4) 100%);
      pointer-events: none;
    }

    /* --- Ø­Ø§ÙˆÙŠØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨ --- */
    .book-info-container {
      width: 90%;
      max-width: 800px;
      margin: 20px auto 30px;
      padding: 20px;
      background: rgba(30, 30, 30, 0.8);
      border-radius: 14px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      color: #eee;
    }

    .book-info-container h3 {
      font-size: 24px;
      color: #e6b587;
      margin-bottom: 10px;
      text-align: right;
    }

    .book-info-container p {
      font-size: 14px;
      line-height: 1.7;
      margin-bottom: 12px;
      text-align: right;
      color: #ccc;
    }

    .book-info-container .author {
      color: #66d9ff;
      font-weight: 500;
      font-style: italic;
    }

    .benefits {
      margin: 15px 0;
      padding-right: 20px;
    }

    .benefits h4 {
      color: #3498db;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .benefits ul {
      list-style: none;
      padding-right: 20px;
    }

    .benefits li {
      margin-bottom: 8px;
      position: relative;
    }

    .benefits li::before {
      content: "âœ“";
      color: #2ecc71;
      font-weight: bold;
      margin-left: 6px;
      position: absolute;
      right: 100%;
    }

    /* --- Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© ØªØ­Øª Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨ --- */
    .natural-image-container {
      width: 90%;
      max-width: 800px;
      margin: 10px auto 30px;
      height: 250px;
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.5);
      position: relative;
      opacity: 0.8;
    }

    .natural-image {
      width: 100%;
      height: 100%;
      background-image: url('https://images.unsplash.com/photo-1472851294608-062f824d29cc?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&h=800&q=90');
      background-size: cover;
      background-position: center;
    }

    .natural-image::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(45deg, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.6) 100%);
      pointer-events: none;
    }

    /* --- Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØµØºÙ‘Ø± Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© --- */
    .main-product {
      position: fixed;
      top: 100px;
      left: 20px;
      width: 260px;
      background: rgba(30, 30, 30, 0.8);
      border: 1px solid #444;
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      z-index: 98;
      display: none;
      backdrop-filter: blur(10px);
    }

    .main-product h3 {
      font-size: 17px;
      color: #fff;
      margin-bottom: 6px;
      text-align: right;
      font-weight: 600;
    }

    .main-product p {
      font-size: 13px;
      color: #bbb;
      margin-bottom: 12px;
      text-align: right;
      line-height: 1.5;
    }

    .add-to-cart-btn {
      display: block;
      width: 100%;
      padding: 10px;
      background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      text-align: center;
      font-weight: 500;
      box-shadow: 0 3px 8px rgba(52, 152, 219, 0.3);
    }

    .add-to-cart-btn:hover {
      background: linear-gradient(135deg, #2980b9 0%, #1f6aad 100%);
    }

    /* Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
    .menu-toggle {
      position: fixed;
      top: 75px;
      right: 20px;
      width: 50px;
      height: 50px;
      background: rgba(30, 30, 30, 0.8);
      border: 1px solid #555;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 100;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      backdrop-filter: blur(5px);
    }

    .menu-toggle:hover {
      transform: scale(1.05);
      background: rgba(50, 50, 50, 0.8);
    }

    .menu-toggle span {
      width: 60%;
      height: 3px;
      background-color: #aaa;
      margin: 3px 0;
      border-radius: 1px;
      transition: 0.3s;
    }

    /* Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¹Ø§Ù…Ø© */
    .panel {
      position: fixed;
      top: 60px;
      right: -320px;
      width: 300px;
      height: calc(100% - 60px);
      background: #111;
      box-shadow: -8px 0 30px rgba(0,0,0,0.5);
      z-index: 99;
      transition: right 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      padding: 20px;
      border-right: 1px solid #333;
      overflow-y: auto;
      backdrop-filter: blur(10px);
    }

    .panel.open {
      right: 0;
    }

    .panel h2 {
      text-align: center;
      color: #3498db;
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 2px solid #3498db;
      font-size: 20px;
      font-weight: 600;
    }

    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
    .menu-btn {
      display: block;
      width: 100%;
      padding: 16px;
      margin-bottom: 12px;
      background-color: rgba(50, 50, 50, 0.6);
      border: 1px solid #444;
      border-radius: 10px;
      text-align: center;
      font-size: 15px;
      color: #ccc;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .menu-btn:hover {
      background-color: #333;
      color: #fff;
    }

    /* Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ */
    .add-product-form {
      margin-top: 15px;
      padding: 18px;
      background-color: rgba(50, 50, 50, 0.6);
      border: 1px solid #444;
      border-radius: 10px;
      box-shadow: 0 2px 7px rgba(0,0,0,0.2);
    }

    .add-product-form input,
    .add-product-form textarea,
    .add-product-form button {
      width: 100%;
      margin-bottom: 10px;
      padding: 8px;
      border: 1px solid #555;
      border-radius: 6px;
      font-size: 13px;
      background-color: #333;
      color: white;
    }

    .add-product-form input::placeholder,
    .add-product-form textarea::placeholder {
      color: #888;
    }

    .add-new-product-btn {
      background-color: #2ecc71;
      color: white;
      font-weight: bold;
      padding: 10px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    /* --- Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù„ÙØ§Øª ÙÙŠ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¶Ø§ÙØ© --- */
    .preview-container {
      margin: 10px 0;
      text-align: center;
    }

    .preview-box {
      width: 100%;
      height: 120px;
      background-color: #222;
      border: 1px dashed #555;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #888;
      font-size: 13px;
      overflow: hidden;
    }

    .preview-box img {
      max-width: 100%;
      max-height: 100%;
      object-fit: cover;
    }

    .upload-btn-wrapper {
      position: relative;
      overflow: hidden;
      display: inline-block;
      margin: 0 5px;
    }

    .btn {
      border: 1px solid #555;
      display: inline-block;
      padding: 8px 12px;
      cursor: pointer;
      background-color: #444;
      border-radius: 6px;
      font-size: 13px;
    }

    .btn:hover {
      background-color: #555;
    }

    .upload-btn-wrapper input[type=file] {
      font-size: 100px;
      position: absolute;
      left: 0;
      top: 0;
      opacity: 0;
      cursor: pointer;
    }

    /* Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© */
    #mainProfilePic {
      position: fixed;
      top: 20px;
      left: 20px;
      width: 55px;
      height: 55px;
      border-radius: 50%;
      object-fit: cover;
      z-index: 99;
      border: 3px solid #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      display: none;
    }

    /* Ø®Ø§Ù†Ø© Ø§Ù„Ø³Ù„Ø© */
    .cart-screen {
      position: fixed;
      top: 60px;
      left: 0;
      width: 100%;
      height: calc(100% - 60px);
      background-color: #000;
      z-index: 98;
      display: none;
      flex-direction: column;
      padding: 20px;
      box-sizing: border-box;
      overflow-y: auto;
    }

    .cart-header {
      text-align: center;
      color: #3498db;
      margin-bottom: 20px;
      font-size: 20px;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
      font-weight: 600;
    }

    .cart-close {
      position: absolute;
      top: 20px;
      left: 20px;
      background-color: #95a5a6;
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    /* --- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ø³Ù„Ø© (Ù…Ø­Ø¯Ø«Ø© Ù„Ù„ØªØ±ØªÙŠØ¨) --- */
    .cart-item {
      margin-bottom: 18px;
      padding: 16px;
      background-color: #1a1a1a;
      border: 1px solid #444;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      display: flex;
      align-items: flex-start;
      gap: 14px;
      transition: all 0.2s ease;
    }

    .cart-item:hover {
      background-color: #222;
      transform: translateY(-2px);
    }

    .cart-item .item-image {
      width: 85px;
      height: 85px;
      background-size: cover;
      background-position: center;
      border-radius: 10px;
      border: 1px solid #555;
      flex-shrink: 0;
      background-color: #222;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    .cart-item .item-details {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .cart-item strong {
      color: #fff;
      font-size: 16px;
      margin-bottom: 4px;
    }

    .cart-item .item-note {
      font-size: 12px;
      color: #888;
      font-style: italic;
      margin-bottom: 5px;
    }

    .cart-item p {
      color: #bbb;
      font-size: 13px;
      margin: 3px 0;
    }

    /* --- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø³Ù„Ø© (Ù…Ø­Ø¯Ø«Ø© Ù„Ù„ØªØ±ØªÙŠØ¨) --- */
    .cart-item-actions {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 6px;
      min-width: 120px;
    }

    .cart-item .cart-item-buy {
      display: block;
      width: 100%;
      padding: 9px;
      background-color: #28a745;
      color: white;
      text-align: center;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      text-decoration: none;
      box-shadow: 0 1px 3px rgba(40,167,69,0.3);
    }

    .cart-item .cart-item-buy:hover {
      background-color: #218838;
    }

    .cart-item .cart-item-download {
      display: block;
      width: 100%;
      padding: 10px;
      background-color: #0077cc;
      color: white;
      text-align: center;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      text-decoration: none;
      box-shadow: 0 1px 3px rgba(0,119,204,0.3);
    }

    .cart-item .cart-item-download:hover {
      background-color: #005fa3;
    }

    .cart-item .cart-item-locked {
      display: block;
      width: 100%;
      padding: 10px;
      background-color: #f39c12;
      color: white;
      text-align: center;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
      cursor: not-allowed;
      box-shadow: 0 1px 3px rgba(243,156,18,0.3);
    }

    .cart-item .cart-item-remove {
      display: block;
      width: 100%;
      padding: 7px;
      background-color: #dc3545;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
      font-weight: 500;
      box-shadow: 0 1px 3px rgba(220,53,69,0.3);
    }

    .cart-item .cart-item-remove:hover {
      background-color: #c82333;
    }

    .cart-total {
      text-align: center;
      font-weight: bold;
      margin: 20px 0 12px;
      color: #3498db;
      font-size: 18px;
      padding: 12px;
      background-color: #111;
      border-radius: 8px;
      border: 1px solid #3498db;
      box-shadow: 0 2px 6px rgba(52,152,187,0.2);
    }

    /* --- Ø®Ø§Ù†Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª --- */
    #commentsScreen {
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    #commentsList {
      flex: 1;
      overflow-y: auto;
      max-height: 200px;
      padding: 10px;
      background-color: #1a1a1a;
      border-radius: 8px;
      border: 1px solid #444;
      font-size: 14px;
      color: #ccc;
      line-height: 1.6;
    }

    .comment {
      margin-bottom: 10px;
      padding: 10px;
      background-color: #222;
      border-radius: 6px;
      border-left: 4px solid #3498db;
      word-wrap: break-word;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
    }

    .comment-text {
      flex: 1;
    }

    .comment-actions {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .edit-comment-btn, .delete-comment-btn {
      background-color: #95a5a6;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 5px 8px;
      font-size: 12px;
      cursor: pointer;
      min-width: 50px;
    }

    .delete-comment-btn {
      background-color: #e74c3c;
    }

    .edit-comment-btn:hover {
      background-color: #7f8c8d;
    }

    .delete-comment-btn:hover {
      background-color: #c0392b;
    }

    #commentInput {
      width: 100%;
      min-height: 60px;
      max-height: 120px;
      padding: 12px;
      background-color: #333;
      border: 1px solid #555;
      border-radius: 8px;
      color: #eee;
      font-size: 14px;
      resize: none;
      transition: height 0.2s ease;
      outline: none;
    }

    #commentInput:focus {
      border-color: #3498db;
      box-shadow: 0 0 5px rgba(52, 152, 187, 0.3);
    }

    #sendCommentBtn {
      width: 100%;
      padding: 10px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      cursor: pointer;
      font-weight: 500;
    }

    #sendCommentBtn:hover {
      background-color: #2980b9;
    }

    /* --- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© Ø¯Ø§Ø®Ù„ "Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ" --- */
    #adminControls {
      display: none;
      margin-top: 20px;
      padding: 15px;
      background: rgba(50, 50, 50, 0.8);
      border: 1px solid #444;
      border-radius: 10px;
      font-size: 14px;
    }

    #adminControls h3 {
      color: #3498db;
      margin-bottom: 10px;
      text-align: right;
    }

    .admin-btn {
      display: block;
      width: 100%;
      padding: 8px;
      margin-bottom: 8px;
      background-color: #8e44ad;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
      text-align: center;
    }

    .admin-btn:hover {
      background-color: #7d3c98;
    }

    .admin-btn.danger {
      background-color: #c0392b;
    }

    .admin-btn.danger:hover {
      background-color: #a93226;
    }

    #adminPassword {
      width: 100%;
      padding: 8px;
      background-color: #333;
      border: 1px solid #555;
      border-radius: 6px;
      color: #eee;
      font-size: 13px;
      margin-bottom: 10px;
    }

    /* --- Ù…Ø±Ø¨Ø¹ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ --- */
    #logoutPassword {
      width: 100%;
      padding: 8px;
      background-color: #333;
      border: 1px solid #555;
      border-radius: 6px;
      color: #eee;
      font-size: 13px;
      margin-bottom: 10px;
    }

    /* --- Ù†Ù…Ø· Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ù„Ù†ØµØ§Ø¦Ø­ --- */
    .tip {
      background: rgba(50, 50, 50, 0.6);
      border: 1px solid #444;
      border-radius: 10px;
      padding: 12px;
      margin-bottom: 10px;
      transition: all 0.2s ease;
    }

    .tip:hover {
      background: #333;
      transform: translateY(-2px);
    }

    .tip-ar {
      color: #fff;
      font-size: 14px;
      margin-bottom: 4px;
      font-weight: 500;
    }

    .tip-en {
      color: #bbb;
      font-size: 12px;
      font-style: italic;
    }

    .tip-actions {
      display: flex;
      justify-content: flex-end;
      margin-top: 8px;
    }

    .copy-btn {
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 4px 8px;
      font-size: 12px;
      cursor: pointer;
    }

    .copy-btn:hover {
      background-color: #2980b9;
    }
    
    /* --- ØªØ­Ø³ÙŠÙ†Ø§Øª PayPal --- */
    .paypal-button-container {
      margin-top: 10px;
      text-align: center;
    }
    
    .payment-status {
      margin-top: 10px;
      padding: 10px;
      border-radius: 6px;
      text-align: center;
      font-weight: bold;
    }
    
    .payment-success {
      background-color: rgba(46, 204, 113, 0.2);
      color: #2ecc71;
      border: 1px solid #2ecc71;
    }
    
    .payment-error {
      background-color: rgba(231, 76, 60, 0.2);
      color: #e74c3c;
      border: 1px solid #e74c3c;
    }
    
    .payment-loading {
      background-color: rgba(52, 152, 219, 0.2);
      color: #3498db;
      border: 1px solid #3498db;
    }
    
    /* --- ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø© --- */
    @media (max-width: 768px) {
      .slider-container {
        width: 90%;
        height: 250px;
      }
      
      .main-product {
        width: 90%;
        left: 5%;
        top: 80px;
      }
      
      .panel {
        width: 85%;
      }
      
      .book-info-container, .natural-image-container {
        width: 95%;
      }
      
      .cart-item {
        flex-direction: column;
      }
      
      .cart-item-actions {
        width: 100%;
        flex-direction: row;
        justify-content: space-between;
      }
      
      .cart-item .cart-item-buy,
      .cart-item .cart-item-download,
      .cart-item .cart-item-remove {
        width: 48%;
      }
    }
    
    @media (max-width: 480px) {
      .header-banner {
        font-size: 16px;
        padding: 0 12px;
        height: 32px;
      }
      
      .product-card {
        min-width: 150px;
      }
      
      .cart-item-actions {
        flex-direction: column;
      }
      
      .cart-item .cart-item-buy,
      .cart-item .cart-item-download,
      .cart-item .cart-item-remove {
        width: 100%;
      }
    }
  </style>
</head>
<body>

  <!-- Ø´Ø±ÙŠØ· Ø§Ø³Ù… Ø¹Ù„ÙˆÙŠ ØµØºÙŠØ± ÙˆÙ…Ø¯ÙˆØ± -->
  <div class="header-banner">Samawon</div>

  <!-- Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ (Ø§Ù„Ø¢Ù† ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·) -->
  <div class="slider-container">
    <div class="single-image"></div>
  </div>

  <!-- Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© -->
  <img id="mainProfilePic" alt="Profile">

  <!-- Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <div class="main-product" id="mainProduct" style="display: none;">
    <h3 id="mainProductName">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</h3>
    <p id="mainProductPrice">Ø§Ù„Ø³Ø¹Ø±: 0 Ø¯ÙˆÙ„Ø§Ø±</p>
    <p id="mainProductDesc">ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬</p>
    <button class="add-to-cart-btn" onclick="addToCartFromMain()">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
  </div>

  <!-- Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
  <div class="menu-toggle" id="menuToggle">â˜°</div>

  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <div class="panel" id="mainMenu">
    <h2>Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h2>
    <div class="menu-btn" id="aboutBtn">Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ</div>
    <div class="menu-btn" id="tipsBtn">Ù†ØµØ§Ø¦Ø­</div>
    <div class="menu-btn" id="medicalTipsBtn">Ù†ØµØ§Ø¦Ø­ Ø·Ø¨ÙŠØ©</div>
    <div class="menu-btn" id="commentsBtn">ğŸ’¬ ØªØ¹Ù„ÙŠÙ‚Ø§Øª</div>
    <!-- Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ù„Ù„Ù…Ø¯ÙŠØ± Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div class="menu-btn" id="addProductBtn" style="display: none;">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</div>

    <!-- Ø²Ø± ÙØªØ­ Ø®Ø§Ù†Ø© Ø§Ù„Ø³Ù„Ø© -->
    <div class="menu-btn" id="openCartBtn">ğŸ›’ Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©</div>
  </div>

  <!-- Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ -->
  <div class="panel" id="aboutScreen">
    <h2>Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ</h2>
    <button class="close-panel" id="closeAbout">ğŸ”™</button>
    <div class="about-content" style="text-align: right; margin: 20px; line-height: 1.8; font-size: 14px; color: #ccc;">
      <p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> Samawon</p>
      <p><strong>ØµØ§Ø­Ø¨ Ø§Ù„Ù…ØªØ¬Ø±</strong></p>
      <p><strong>Ø¹Ù† Ø§Ù„Ù…ØªØ¬Ø±:</strong> Ø¨ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</p>
      <p>Ø²ÙˆØ±ÙˆØ§ Ù…ØªØ¬Ø±Ù†Ø§ ÙˆØ§Ø³ØªÙ…ØªØ¹ÙˆØ§ Ø¨ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ ÙÙ‚Ø·</p>
      <hr style="border: 1px solid #444; margin: 15px 0;">
      <div>
        <a href="mailto:wabou580@gmail.com" style="color: #3498db; text-decoration: none; margin: 5px 0; display: block;">ğŸ“§ wabou580@gmail.com</a>
        <a href="https://wa.me/212626097085" target="_blank" style="color: #2ecc71; text-decoration: none; margin: 5px 0; display: block;">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨ 764-312697</a>
        <a href="https://youtube.com/@armed-gw1n" target="_blank" style="color: #e74c3c; text-decoration: none; margin: 5px 0; display: block;">â–¶ï¸ YouTube</a>
        <a href="https://www.instagram.com/n5ve0?igsh=azhwanJ1OHhyaW91" target="_blank" style="color: #8e44ad; text-decoration: none; margin: 5px 0; display: block;">ğŸŸ£ Instagram</a>
      </div>
      <hr style="border: 1px solid #444; margin: 15px 0;">
      <div style="font-size: 12px; color: #777;">
        <p>ç®€ä»‹ | <a href="#" style="color: #555;">æ–°é—»ä¸­å¿ƒ</a> | ç‰ˆæƒ | <a href="mailto:wabou580@gmail.com" style="color: #555;">è”ç³»æˆ‘ä»¬</a> | åˆ›ä½œè€… | åˆŠç™»å¹¿å‘Š | å¼€å‘äººå‘˜ | æ¡æ¬¾ | ç§éš | æ”¿ç­–åŠå®‰å…¨ | YouTube çš„è¿ä½œæ–¹å¼ | æµ‹è¯•æ–°åŠŸèƒ½</p>
        <p>Â© 2025 Google LLC</p>
      </div>

      <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ© Ø§Ù„Ù…Ø®ÙÙŠØ© -->
      <div id="adminControls">
        <h3>ğŸ” ØªØ­ÙƒÙ…</h3>
        <input type="password" id="adminPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <!-- Ø²Ø± ÙˆØ§Ø­Ø¯ Ù„Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬ -->
        <button class="admin-btn" id="toggleLoginBtn">ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>

        <!-- ØªØ¸Ù‡Ø± ÙÙ‚Ø· Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
        <div id="adminActions" style="display: none;">
          <button class="admin-btn" id="addProductAdminBtn">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</button>
          <button class="admin-btn" id="clearAllCommentsBtn">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</button>

          <!-- Ø²Ø± Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© -->
          <div class="upload-btn-wrapper">
            <button class="btn">ğŸ–¼ï¸ ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©</button>
            <input type="file" id="profilePicInput" accept="image/*">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Ù†ØµØ§Ø¦Ø­ -->
  <div class="panel" id="tipsScreen">
    <h2>Ù†ØµØ§Ø¦Ø­ Ø­ÙŠØ§Ø©</h2>
    <button class="close-panel" id="closeTips">ğŸ”™</button>
    <div id="tipsContainer"></div>
  </div>

  <!-- Ù†ØµØ§Ø¦Ø­ Ø·Ø¨ÙŠØ© -->
  <div class="panel" id="medicalTipsScreen">
    <h2>Ù†ØµØ§Ø¦Ø­ Ø·Ø¨ÙŠØ©</h2>
    <button class="close-panel" id="closeMedicalTips">ğŸ”™</button>
    <div id="medicalTipsContainer"></div>
  </div>

  <!-- Ø®Ø§Ù†Ø© Ø§Ù„Ø³Ù„Ø© -->
  <div class="cart-screen" id="cartScreen">
    <button class="cart-close" id="closeCartScreen">Ø¥ØºÙ„Ø§Ù‚</button>
    <div class="cart-header">ğŸ›’ Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</div>
    <div id="cartItems"></div>
    <div class="cart-total" id="cartTotal">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒØ§Ù…Ù„: 0 Ø¯ÙˆÙ„Ø§Ø±</div>
  </div>

  <!-- Ø®Ø§Ù†Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª -->
  <div class="panel" id="commentsScreen">
    <h2>ğŸ’¬ ØªØ¹Ù„ÙŠÙ‚Ø§Øª</h2>
    <button class="close-panel" id="closeComments">ğŸ”™</button>
    <div id="commentsList">
      <!-- Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù‡Ù†Ø§ -->
    </div>
    <textarea id="commentInput" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§..."></textarea>
    <button id="sendCommentBtn" onclick="sendComment()">Ø¥Ø±Ø³Ø§Ù„</button>
  </div>

  <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ -->
  <div class="panel" id="addProductFormPanel">
    <h2>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h2>
    <button class="close-panel" id="closeAddProductFormPanel">ğŸ”™</button>
    <div class="add-product-form">
      <input type="text" id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
      <input type="number" id="productPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± (Ø£ÙŠ Ø±Ù‚Ù…ØŒ 0 = Ù…Ø¬Ø§Ù†ÙŠ)" min="0" step="any">
      <textarea id="productDesc" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬"></textarea>

      <!-- Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ù…Ù†ØªØ¬ -->
      <div class="upload-btn-wrapper">
        <button class="btn">1. Ù…Ù„Ù Ø§Ù„Ù…Ù†ØªØ¬</button>
        <input type="file" id="productFile" accept="*/*">
      </div>
      <div class="preview-container">
        <div class="preview-box" id="filePreview">Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ù‡Ù†Ø§</div>
      </div>

      <!-- Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ù„Ù…Ù†ØªØ¬ -->
      <div class="upload-btn-wrapper">
        <button class="btn">2. ØµÙˆØ±Ø© Ù„Ù„Ù…Ù†ØªØ¬</button>
        <input type="file" id="productImage" accept="image/*">
      </div>
      <div class="preview-container">
        <div class="preview-box" id="imagePreview">Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§</div>
      </div>

      <button onclick="addNewProduct()" class="add-new-product-btn">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</button>
      <button onclick="closeAddProductFormPanel()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>
  </div>

  <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„ØµÙÙˆÙ (ØªÙ…Øª Ø¥Ø²Ø§Ù„Ø© 8 ØµÙÙˆÙØŒ ØªØ¨Ù‚Ù‰ ØµÙØ§Ù† ÙÙ‚Ø·) -->
  <div class="rows-container">
    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ -->
    <div class="row">
      <div class="product-card">
        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1542744094-24638eff58bb?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=200&q=80')"></div>
        <h4>Ø£Ø³Ø·ÙˆØ±Ø© Ø§Ù„ØªÙÙƒÙŠØ±</h4>
        <p>ÙƒØªØ§Ø¨ Ø¹Ù† Ø§Ù„ØªØ­ÙŠÙ‘Ø²Ø§Øª</p>
        <p class="price">12.99 Ø¯ÙˆÙ„Ø§Ø±</p>
        <div class="stars">
          <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜†</span>
        </div>
      </div>
      <div class="product-card">
        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=200&q=80')"></div>
        <h4>Ø§Ù„Ø¹Ø§Ø¯Ø§Øª Ø§Ù„Ø°Ø±ÙŠØ©</h4>
        <p>Ø¨Ù†Ø§Ø¡ Ø¹Ø§Ø¯Ø§Øª Ù‚ÙˆÙŠØ©</p>
        <p class="price">14.99 Ø¯ÙˆÙ„Ø§Ø±</p>
        <div class="stars">
          <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span>
        </div>
      </div>
      <div class="product-card">
        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1589998059171-988d887df646?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=200&q=80')"></div>
        <h4>ÙÙ† Ø§Ù„Ø­Ø±Ø¨</h4>
        <p>Ù†Øµ Ø³ÙˆÙ† ØªØ²Ùˆ</p>
        <p class="price">8.99 Ø¯ÙˆÙ„Ø§Ø±</p>
        <div class="stars">
          <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜†</span><span>â˜†</span>
        </div>
      </div>
    </div>

    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ -->
    <div class="row">
      <div class="product-card">
        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=200&q=80')"></div>
        <h4>Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¹Ø§Ø·ÙÙŠ</h4>
        <p>Ù„Ø¯Ù‰ Ø¯Ø§Ù†ÙŠØ§Ù„ Ø¬ÙˆÙ„Ù…Ø§Ù†</p>
        <p class="price">16.50 Ø¯ÙˆÙ„Ø§Ø±</p>
        <div class="stars">
          <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span>
        </div>
      </div>
      <div class="product-card">
        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1585079542156-2755d9c8a094?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=200&q=80')"></div>
        <h4>Ø§Ù„ØºØ±Ø¶</h4>
        <p>ÙƒØªØ§Ø¨ Ø¹Ù† Ø§Ù„Ù…Ø¹Ù†Ù‰</p>
        <p class="price">11.00 Ø¯ÙˆÙ„Ø§Ø±</p>
        <div class="stars">
          <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜†</span><span>â˜†</span>
        </div>
      </div>
      <div class="product-card">
        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1543002588-bfa74002ed7e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=200&q=80')"></div>
        <h4>Ø§Ù„Ø§Ù†ÙØ¬Ø§Ø± Ø§Ù„Ù…Ø¹Ø±ÙÙŠ</h4>
        <p>ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø°Ø§ÙƒØ±Ø©</p>
        <p class="price">13.75 Ø¯ÙˆÙ„Ø§Ø±</p>
        <div class="stars">
          <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜†</span>
        </div>
      </div>
    </div>

    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆÙ…Ù†Ø§ÙØ¹ Ø§Ù„ÙƒØªØ§Ø¨ (Ø¨Ø¯ÙˆÙ† Ø³Ø¹Ø± Ø£Ùˆ Ø²Ø±) -->
    <div class="book-info-container">
      <h3>Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø¨Ø·ÙŠØ¡ ÙˆØ§Ù„Ø³Ø±ÙŠØ¹</h3>
      <p class="author">Ø¨Ù‚Ù„Ù…: Ø¯Ø§Ù†ÙŠØ§Ù„ ÙƒØ§Ù†ÙŠÙ…Ø§Ù†</p>
      <p>ÙŠÙØ¹Ø¯ Ù‡Ø°Ø§ Ø§Ù„ÙƒØªØ§Ø¨ Ø£Ø­Ø¯ Ø£Ø¹Ø¸Ù… Ø§Ù„ÙƒØªØ¨ ÙÙŠ Ø¹Ù„Ù… Ø§Ù„Ù†ÙØ³ Ø§Ù„Ø­Ø¯ÙŠØ«ØŒ Ø­ÙŠØ« ÙŠÙÙØµÙ‘Ù„ Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø¬Ø§Ø¦Ø²Ø© Ù†ÙˆØ¨Ù„ Ø¯Ø§Ù†ÙŠØ§Ù„ ÙƒØ§Ù†ÙŠÙ…Ø§Ù† ÙƒÙŠÙ ÙŠØªØ®Ø° Ø§Ù„Ø¹Ù‚Ù„ Ø§Ù„Ø¨Ø´Ø±ÙŠ Ø§Ù„Ù‚Ø±Ø§Ø±Ø§ØªØŒ ÙˆÙŠÙÙ‚Ø³Ù‘Ù… Ø§Ù„ØªÙÙƒÙŠØ± Ø¥Ù„Ù‰ Ù†Ø¸Ø§Ù…ÙŠÙ†: Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø±ÙŠØ¹ (Ø§Ù„Ø¨Ø¯ÙŠÙ‡ÙŠ) ÙˆØ§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø·ÙŠØ¡ (Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ).</p>
      <p>ÙŠÙØ¸Ù‡Ø± ÙƒØ§Ù†ÙŠÙ…Ø§Ù† ÙƒÙŠÙ ØªØ¤Ø¯ÙŠ Ø§Ù„ØªØ­ÙŠÙ‘Ø²Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙÙŠØ© Ø¥Ù„Ù‰ Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ØŒ ÙˆØ§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ù…Ø§Ù„ÙŠØ© ÙˆØ¹Ø§Ø·ÙÙŠØ© ØºÙŠØ± Ù…Ù†Ø·Ù‚ÙŠØ©ØŒ ÙˆÙŠÙÙ‚Ø¯Ù‘Ù… Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø¹Ù…Ù„ÙŠØ© Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙÙƒÙŠØ± ÙˆØ§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ø£ÙØ¶Ù„ ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©.</p>

      <div class="benefits">
        <h4>Ù…Ù†Ø§ÙØ¹ Ù‡Ø°Ø§ Ø§Ù„ÙƒØªØ§Ø¨:</h4>
        <ul>
          <li>ÙÙ‡Ù… Ø£Ø³Ø¨Ø§Ø¨ Ø§ØªØ®Ø§Ø°Ùƒ Ù„Ù‚Ø±Ø§Ø±Ø§Øª ØºÙŠØ± Ù…Ù†Ø·Ù‚ÙŠØ©.</li>
          <li>ØªØ­Ø³ÙŠÙ† Ù…Ù‡Ø§Ø±Ø§ØªÙƒ ÙÙŠ Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©.</li>
          <li>Ø§Ù„Ø¥Ø¯Ø±Ø§Ùƒ Ø§Ù„Ù…Ø¨ÙƒØ± Ù„Ù„ØªØ­ÙŠÙ‘Ø²Ø§Øª Ø§Ù„Ù†ÙØ³ÙŠØ© (Ù…Ø«Ù„: ØªØ­ÙŠÙ‘Ø² Ø§Ù„ØªÙˆØ§ÙØ±ØŒ ØªØ­ÙŠÙ‘Ø² Ø§Ù„ØªØ£ÙƒÙŠØ¯).</li>
          <li>ØªØ¹Ø²ÙŠØ² Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ù‚Ø¯ÙŠ ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„ÙŠ.</li>
          <li>ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ù‚ÙŠØ§Ø¯Ø©.</li>
          <li>Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ø£ÙØ¶Ù„ ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ§Ù„Ø¹Ø§Ø·ÙÙŠØ©.</li>
          <li>ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù†Ø§ØªØ¬Ø© Ø¹Ù† Ø§Ù„ØªØ³Ø±Ø¹ ÙÙŠ Ø§Ù„Ø­ÙƒÙ….</li>
        </ul>
      </div>
    </div>

    <!-- Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© ØªØ­Øª Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨ -->
    <div class="natural-image-container">
      <div class="natural-image"></div>
    </div>
  </div>

  <!-- ØªØ­Ù…ÙŠÙ„ SDK Ù„Ù€ PayPal -->
  <script src="https://www.paypal.com/sdk/js?client-id=test&currency=USD"></script>

  <script>
    // --- Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ù„Ø§ÙŠØ¯Ø±ØŒ ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· ---
    // ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø¯Ø§Ù„Ø© nextSlide() ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ

    // --- Ø¨Ø§Ù‚ÙŠ ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ---
    const el = id => document.getElementById(id);
    const menuToggle = el('menuToggle');
    const mainMenu = el('mainMenu');
    const aboutScreen = el('aboutScreen');
    const tipsScreen = el('tipsScreen');
    const medicalTipsScreen = el('medicalTipsScreen');
    const openCartBtn = el('openCartBtn');
    const mainProduct = el('mainProduct');
    const mainProductName = el('mainProductName');
    const mainProductPrice = el('mainProductPrice');
    const mainProductDesc = el('mainProductDesc');
    const cartItems = el('cartItems');
    const cartTotal = el('cartTotal');
    const cartScreen = el('cartScreen');
    const closeCartScreen = el('closeCartScreen');
    const commentsBtn = el('commentsBtn');
    const commentsScreen = el('commentsScreen');
    const closeComments = el('closeComments');
    const commentsList = el('commentsList');
    const commentInput = el('commentInput');
    const sendCommentBtn = el('sendCommentBtn');
    const addProductFormPanel = el('addProductFormPanel');
    const closeAddProductFormPanel = el('closeAddProductFormPanel');
    const adminControls = el('adminControls');
    const adminPassword = el('adminPassword');
    const toggleLoginBtn = el('toggleLoginBtn'); // Ø§Ù„Ø²Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯
    const adminActions = el('adminActions');
    const addProductAdminBtn = el('addProductAdminBtn');
    const addProductBtn = el('addProductBtn'); // Ø§Ù„Ø²Ø± ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
    const profilePicInput = el('profilePicInput'); // Ù…Ø¯Ø®Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©
    const mainProfilePic = el('mainProfilePic'); // Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰

    // --- Ø­Ø§Ù„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ ---
    let isAdminLoggedIn = false;

    // --- ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ---
    menuToggle.onclick = () => {
      closeAll();
      mainMenu.classList.add('open');
    };

    // --- Ø¥ØºÙ„Ø§Ù‚ Ø¨Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ---
    document.addEventListener('click', (e) => {
      if (!mainMenu.contains(e.target) && !menuToggle.contains(e.target) && mainMenu.classList.contains('open')) {
        closeAll();
      }
    });

    function closeAll() {
      [mainMenu, aboutScreen, tipsScreen, medicalTipsScreen, commentsScreen, addProductFormPanel].forEach(p => {
        p.classList.remove('open');
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­ÙˆÙ„Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
        p.style.transition = 'none';
        p.offsetHeight; // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ…ÙˆØ¶Ø¹
        p.style.transition = '';
      });
    }

    // --- ÙØªØ­ Ø§Ù„Ø´Ø§Ø´Ø§Øª ---
    el('aboutBtn').onclick = () => {
      openPanel(aboutScreen);
      // Ø¥Ø¸Ù‡Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ"
      adminControls.style.display = 'block';
    };
    el('tipsBtn').onclick = () => {
      openPanel(tipsScreen);
      if (el('tipsContainer').children.length === 0) generateTips(el('tipsContainer'), lifeTips, "Ù†ØµÙŠØ­Ø© Ø­ÙŠØ§Ø© #");
    };
    el('medicalTipsBtn').onclick = () => {
      openPanel(medicalTipsScreen);
      if (el('medicalTipsContainer').children.length === 0) generateTips(el('medicalTipsContainer'), medicalTips, "Ù†ØµÙŠØ­Ø© Ø·Ø¨ÙŠØ© #");
    };
    commentsBtn.onclick = () => openPanel(commentsScreen);
    // Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ÙŠÙØªØ­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù…Ø¨Ø§Ø´Ø±Ø© (ÙÙ‚Ø· Ù„Ù„Ù…Ø¯ÙŠØ± Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„)
    addProductBtn.onclick = () => {
      if (isAdminLoggedIn) {
        openPanel(addProductFormPanel);
      } else {
        alert('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ø£ÙˆÙ„Ø§Ù‹. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ù†Ø¨Ø°Ø© Ø¹Ù†ÙŠ" ÙˆØ£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.');
      }
    };

    function openPanel(panel) {
      closeAll();
      panel.classList.add('open');
      // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ…ÙˆØ¶Ø¹ Ø¨Ø¹Ø¯ ÙØªØ­ Ø§Ù„Ù„ÙˆØ­Ø©
      panel.offsetHeight;
      panel.classList.add('open');
    }

    // --- Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø®Ø§Ù†Ø§Øª ---
    closeComments.onclick = () => {
      commentsScreen.classList.remove('open');
    };

    closeAddProductFormPanel.onclick = () => {
      addProductFormPanel.classList.remove('open');
    };

    // --- ÙˆØ¸ÙŠÙØ© Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬ ---
    toggleLoginBtn.onclick = async () => {
      const password = adminPassword.value.trim();
      if (!password) return alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');

      try {
        // âœ… Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
        const response = await fetch('/api/verify-password', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ password: password })
        });

        const data = await response.json();

        if (response.ok && data.valid) {
          // âœ… ØªØ­Ù‚Ù‚ Ù†Ø§Ø¬Ø­ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
          if (isAdminLoggedIn) {
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            handleLogout();
          } else {
            // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
            handleSuccessfulLogin();
          }
          return;
        }
      } catch (error) {
        console.error('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…:', error);
      }

      // âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ© Ù…Ø¨Ø§Ø´Ø±Ø©
      if (password === "Ppag6063.@#$") {
        if (isAdminLoggedIn) {
          // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
          handleLogout();
        } else {
          // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
          handleSuccessfulLogin();
        }
        return;
      }

      // âŒ Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚
      alert('ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    };

    // --- ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„/Ø§Ù„Ø®Ø±ÙˆØ¬ ---
    function handleSuccessfulLogin() {
      isAdminLoggedIn = true;
      adminActions.style.display = 'block';
      addProductBtn.style.display = 'block';
      aboutScreen.classList.add('open');
      updateCartScreen();
      toggleLoginBtn.textContent = 'ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬';
      // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
      logSecurityEvent('admin_login', 'Success');
      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ±. ØªÙ… ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….');
    }

    function handleLogout() {
      isAdminLoggedIn = false;
      adminActions.style.display = 'none';
      addProductBtn.style.display = 'none';
      adminPassword.value = '';
      aboutScreen.classList.remove('open');
      updateCartScreen();
      toggleLoginBtn.textContent = 'ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
      // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
      logSecurityEvent('admin_logout', 'Success');
      alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­. ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….');
    }

    // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø­Ø§Ù„ÙŠ ---
    let currentProduct = null;

    // --- Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ù„Ù Ø§Ù„Ù…Ù†ØªØ¬ ---
    el('productFile').onchange = function(e) {
      const file = e.target.files[0];
      const preview = el('filePreview');
      if (!file) return;

      const type = file.type;
      const name = file.name;

      if (type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
          preview.innerHTML = `<img src="${e.target.result}" alt="Ù…Ø¹Ø§ÙŠÙ†Ø©">`;
        };
        reader.readAsDataURL(file);
      } else if (type === 'application/pdf') {
        preview.innerHTML = `
          <div style="text-align:center; padding:10px;">
            <img src="https://img.icons8.com/color/48/000000/pdf.png" alt="PDF">
            <div style="font-size:12px; margin-top:5px;">${name}</div>
          </div>`;
      } else if (type.startsWith('video/')) {
        preview.innerHTML = `
          <div style="text-align:center; padding:10px;">
            <img src="https://img.icons8.com/color/48/000000/video-playlist.png" alt="Video">
            <div style="font-size:12px; margin-top:5px;">${name}</div>
          </div>`;
      } else if (type.startsWith('audio/')) {
        preview.innerHTML = `
          <div style="text-align:center; padding:10px;">
            <img src="https://img.icons8.com/color/48/000000/audio-file.png" alt="Audio">
            <div style="font-size:12px; margin-top:5px;">${name}</div>
          </div>`;
      } else {
        preview.innerHTML = `
          <div style="text-align:center; padding:10px;">
            <img src="https://img.icons8.com/color/48/000000/file.png" alt="File">
            <div style="font-size:12px; margin-top:5px;">${name}</div>
          </div>`;
      }
    };

    // --- Ù…Ø¹Ø§ÙŠÙ†Ø© ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ ---
    el('productImage').onchange = function(e) {
      const file = e.target.files[0];
      const preview = el('imagePreview');
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        preview.innerHTML = `<img src="${e.target.result}" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬">`;
      };
      reader.readAsDataURL(file);
    };

    // --- ØªØ­Ø¯ÙŠØ¯ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù„Ù„Ù…Ù„Ù ---
    function getFileIcon(file) {
      if (!file) return 'https://via.placeholder.com/85x85?text=Ù…Ù„Ù';
      const type = file.type;

      if (type.startsWith('image/')) {
        return URL.createObjectURL(file);
      } else if (type === 'application/pdf') {
        return 'https://img.icons8.com/color/48/000000/pdf.png';
      } else if (type.startsWith('video/')) {
        return 'https://img.icons8.com/color/48/000000/video-playlist.png';
      } else if (type.startsWith('audio/')) {
        return 'https://img.icons8.com/color/48/000000/audio-file.png';
      } else if (type.includes('word') || type.includes('document')) {
        return 'https://img.icons8.com/color/48/000000/docx.png';
      } else if (type.includes('excel') || type.includes('sheet')) {
        return 'https://img.icons8.com/color/48/000000/xlsx.png';
      } else if (type.includes('powerpoint')) {
        return 'https://img.icons8.com/color/48/000000/pptx.png';
      } else {
        return 'https://img.icons8.com/color/48/000000/file.png';
      }
    }

    // --- Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© ---
    function addNewProduct() {
      if (!isAdminLoggedIn) {
        alert('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ø£ÙˆÙ„Ø§Ù‹.');
        return;
      }
      const name = el('productName').value.trim();
      const priceInput = el('productPrice').value.trim();
      const desc = el('productDesc').value.trim();
      const fileInput = el('productFile');
      const imageInput = el('productImage');
      const file = fileInput.files[0];
      const image = imageInput.files[0];

      if (!name) return alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬');

      const price = parseFloat(priceInput);
      if (isNaN(price)) return alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ØµØ­ÙŠØ­');

      // ØªØ­Ø¯ÙŠØ¯ ØµÙˆØ±Ø© Ø§Ù„Ø¹Ø±Ø¶ (Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø®ØµØµØ©)
      let displayImageUrl = 'https://via.placeholder.com/85x85?text=Ù…Ù†ØªØ¬';
      if (image) {
        displayImageUrl = URL.createObjectURL(image);
      } else if (file) {
        // Ø¥Ø°Ø§ Ù„Ù… ØªÙØ±ÙØ¹ ØµÙˆØ±Ø©ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ù„Ù
        displayImageUrl = getFileIcon(file);
      }

      // ØªØ­Ø¯ÙŠØ¯ Ù…Ù„Ø§Ø­Ø¸Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†ÙˆØ¹
      let note = '';
      if (desc.includes('PDF') || desc.includes('ÙƒØªØ§Ø¨') || desc.includes('ØªÙ‚Ø±ÙŠØ±')) {
        note = 'ğŸ“„ Ù…Ù„Ù Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø¹Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡';
      } else if (desc.includes('Ø¯ÙˆØ±Ø©') || desc.includes('ØªØ¯Ø±ÙŠØ¨')) {
        note = 'ğŸ¥ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ØªØ¹Ù„ÙŠÙ…ÙŠØ© - 1080p';
      } else if (desc.includes('ØªØµÙ…ÙŠÙ…') || desc.includes('Ø´Ø¹Ø§Ø±') || desc.includes('Ù‚Ø§Ù„Ø¨')) {
        note = 'ğŸ¨ Ù…Ù„ÙØ§Øª PSD Ùˆ AI Ù…ØªØ¶Ù…Ù†Ø©';
      } else if (desc.includes('Ø§Ø³ØªØ´Ø§Ø±Ø©')) {
        note = 'â±ï¸ Ø¬Ù„Ø³Ø© Ø®Ø§ØµØ© Ø¹Ø¨Ø± Zoom';
      } else if (price === 0) {
        note = 'ğŸ Ù‡Ø¯ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© - ØªØ­Ù…ÙŠÙ„ ÙÙˆØ±ÙŠ';
      } else {
        note = 'ğŸ“¦ Ù…Ù†ØªØ¬ Ø±Ù‚Ù…ÙŠ - Ù„Ø§ ÙŠØ­ØªØ§Ø¬ Ø´Ø­Ù†';
      }

      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
      cartList.push({
        id: Date.now(),
        name,
        price,
        desc,
        file,
        imageUrl: displayImageUrl, // Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©
        imageFile: image, // Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© (Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§)
        note,
        purchased: price === 0
      });
      alert(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬: ${name} - Ø§Ù„Ø³Ø¹Ø±: ${price} Ø¯ÙˆÙ„Ø§Ø±`);

      // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
      el('productName').value = '';
      el('productPrice').value = '';
      el('productDesc').value = '';
      el('productFile').value = '';
      el('productImage').value = '';
      el('filePreview').innerHTML = 'Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ù‡Ù†Ø§';
      el('imagePreview').innerHTML = 'Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§';

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ù„Ø©
      updateCartScreen();

      // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
      addProductFormPanel.classList.remove('open');
    }

    // --- ÙØªØ­ Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ---
    addProductAdminBtn.onclick = () => {
      if (!isAdminLoggedIn) {
        alert('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ø£ÙˆÙ„Ø§Ù‹.');
        return;
      }
      openPanel(addProductFormPanel);
    };

    // --- Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© ---
    function addToCartFromMain() {
      if (!currentProduct) return;
      cartList.push({ id: Date.now(), ...currentProduct, purchased: currentProduct.price === 0 });
      alert('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©');
      updateCartScreen();
    }

    // --- ÙØªØ­ Ø®Ø§Ù†Ø© Ø§Ù„Ø³Ù„Ø© ÙƒÙˆØ§Ø¬Ù‡Ø© Ù…Ù†ÙØµÙ„Ø© ---
    openCartBtn.onclick = () => {
      closeAll();
      updateCartScreen();
      cartScreen.style.display = 'flex';
    };

    closeCartScreen.onclick = () => {
      cartScreen.style.display = 'none';
    };

    // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ù„Ø© ---
    const cartList = [];

    function updateCartScreen() {
      try {
        cartItems.innerHTML = '';
        let total = 0;

        cartList.forEach(item => {
          total += item.price;
          const div = document.createElement('div');
          div.className = 'cart-item';

          // Ø¨Ù†Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ø³Ù„Ø© Ø¨ØªØ±ØªÙŠØ¨ Ù…Ù†Ø³Ù‚
          div.innerHTML = `
            <div class="item-image" style="background-image: url('${item.imageUrl}')"></div>
            <div class="item-details">
              <strong>${item.name}</strong>
              <p class="item-note">${item.note}</p>
              <p>${item.desc}</p>
              <p>Ø§Ù„Ø³Ø¹Ø±: ${item.price} Ø¯ÙˆÙ„Ø§Ø±</p>
            </div>
            <div class="cart-item-actions">
              <!-- âœ… Ø²Ø± Ø§Ù„Ø­Ø°Ù ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
              ${isAdminLoggedIn ? `<button class="cart-item-remove" onclick="removeFromCart(${item.id})">âŒ Ø­Ø°Ù</button>` : ''}
            </div>
          `;

          let downloadButton = '';
          if (item.purchased && item.file) {
            downloadButton = `<a href="#" onclick="downloadFile(event, ${item.id})" class="cart-item-download">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¢Ù†</a>`;
          } else if (item.file && item.price === 0) {
            downloadButton = `<a href="#" onclick="downloadFile(event, ${item.id})" class="cart-item-download">ğŸŸ¢ ØªØ­Ù…ÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ</a>`;
          } else if (item.file) {
            downloadButton = `<div class="cart-item-locked">ğŸ”’ ÙŠØ¬Ø¨ Ø§Ù„Ø¯ÙØ¹ Ø£ÙˆÙ„Ø§Ù‹</div>`;
          } else {
            downloadButton = `<div class="cart-item-locked">âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù</div>`;
          }

          let buyButton = '';
          if (item.price > 0 && !item.purchased) {
            buyButton = `<a href="#" class="cart-item-buy" onclick="startPaymentForItem(${item.id})">ğŸ’³ Ø´Ø±Ø§Ø¡</a>`;
          }

          // Ø¥Ø¯Ø±Ø§Ø¬ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ù…ÙŠÙ„ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø±
          if (buyButton || downloadButton) {
            const actionsDiv = div.querySelector('.cart-item-actions');
            actionsDiv.innerHTML += buyButton + downloadButton;
          }

          cartItems.appendChild(div);
        });

        cartTotal.textContent = `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒØ§Ù…Ù„: ${total} Ø¯ÙˆÙ„Ø§Ø±`;
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø´Ø© Ø§Ù„Ø³Ù„Ø©:', error);
        cartItems.innerHTML = '<div style="color: #e74c3c; text-align: center; padding: 20px;">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ù„Ø©. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.</div>';
        cartTotal.textContent = 'Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒØ§Ù…Ù„: 0 Ø¯ÙˆÙ„Ø§Ø±';
      }
    }

    // --- Ø­Ø°Ù Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø© ---
    function removeFromCart(id) {
      try {
        const index = cartList.findIndex(p => p.id === id);
        if (index !== -1) {
          // Ø¥Ù„ØºØ§Ø¡ ØªØ­Ø±ÙŠØ± Ø¹Ù†ÙˆØ§Ù† URL Ù„Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©
          if (cartList[index].imageFile && cartList[index].imageUrl.startsWith('blob:')) {
            URL.revokeObjectURL(cartList[index].imageUrl);
          }
          // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„ÙØŒ Ù†ÙØ­Ø±Ø±Ù‡Ø§ ÙÙ‚Ø· Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ø£ÙŠÙ‚ÙˆÙ†Ø©
          else if (cartList[index].file && cartList[index].imageUrl.startsWith('blob:') && cartList[index].imageFile === null) {
            URL.revokeObjectURL(cartList[index].imageUrl);
          }
          cartList.splice(index, 1);
          updateCartScreen();
        }
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.');
      }
    }

    // --- Ø¨Ø¯Ø¡ Ø§Ù„Ø¯ÙØ¹ Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ø­Ø¯ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… PayPal SDK ---
    function startPaymentForItem(id) {
      try {
        const item = cartList.find(p => p.id === id);
        if (!item) throw new Error('Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');

        // âœ… ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Rate Limiting) - Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ·
        const now = Date.now();
        const lastPaymentAttempt = sessionStorage.getItem('lastPaymentAttempt');
        if (lastPaymentAttempt && now - lastPaymentAttempt < 2000) { // 2 Ø«Ø§Ù†ÙŠØ©
          alert('ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
          return;
        }
        sessionStorage.setItem('lastPaymentAttempt', now);

        // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø¹Ù†ØµØ± Ø³Ø§Ø¨Ù‚ Ù„Ù€ PayPal
        const existingPayPalButtons = document.querySelectorAll('.paypal-buttons');
        existingPayPalButtons.forEach(btn => btn.remove());

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø¬Ø¯ÙŠØ¯ Ù„Ø£Ø²Ø±Ø§Ø± PayPal
        const div = document.createElement('div');
        div.className = 'paypal-buttons';
        div.style.padding = '10px';
        div.style.textAlign = 'center';
        const cartItemDiv = document.querySelector(`[onclick="startPaymentForItem(${id})"]`).parentElement;
        cartItemDiv.appendChild(div);

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙØ¹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… PayPal SDK
        paypal.Buttons({
          createOrder: (data, actions) => {
            return actions.order.create({
              purchase_units: [{
                amount: {
                  value: item.price.toFixed(2),
                  currency_code: 'USD'
                },
                description: item.name
              }]
            });
          },
          onApprove: async (data, actions) => {
            try {
              const order = await actions.order.capture();
              console.log('ØªÙ… Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­:', order);

              // âœ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± ÙˆÙŠØ¨Ù‡ÙˆÙƒ (ØªÙ… ØªÙ†ÙÙŠØ°Ù‡ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…)
              // âœ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­Ù„ÙŠ
              item.purchased = true;
              updateCartScreen();
              alert('Ø´ÙƒØ±Ù‹Ø§ Ù„Ùƒ Ø¹Ù„Ù‰ Ø´Ø±Ø§Ø¦Ùƒ! ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ­Ù…ÙŠÙ„.');
              // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
              logSecurityEvent('payment_success', `Product ID: ${id}, Order ID: ${data.orderID}`);
            } catch (error) {
              console.error('ÙØ´Ù„ ÙÙŠ Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ø¯ÙØ¹:', error);
              // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
              logSecurityEvent('payment_error', `Product ID: ${id}, Error: ${error.message}`);
              alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¯ÙØ¹. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.');
            }
          },
          onError: (err) => {
            console.error('Ø®Ø·Ø£ ÙÙŠ Ø¯ÙØ¹ PayPal:', err);
            // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
            logSecurityEvent('payment_error', `PayPal SDK Error: ${err.message}`);
            alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.');
          },
          style: {
            layout: 'horizontal',
            color: 'blue',
            shape: 'pill',
            label: 'pay'
          }
        }).render(div);
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ø¯ÙØ¹:', error);
        // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
        logSecurityEvent('payment_error', `startPaymentForItem Error: ${error.message}`);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡.');
      }
    }

    // --- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ù…Ø¨Ø§Ø´Ø±Ø© ---
    function downloadFile(e, id) {
      e.preventDefault();
      try {
        const item = cartList.find(p => p.id === id);
        if (!item || !item.file) throw new Error('Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');

        const url = URL.createObjectURL(item.file);
        const a = document.createElement('a');
        a.href = url;
        a.download = item.file.name || `Ù…Ù†ØªØ¬_${id}`;
        a.click();
        URL.revokeObjectURL(url);
        // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
        logSecurityEvent('file_download', `Product ID: ${id}, File: ${item.file.name}`);
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù:', error);
        // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
        logSecurityEvent('file_download_error', `Product ID: ${id}, Error: ${error.message}`);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù.');
      }
    }

    // --- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© ---
    // âœ… ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ù„Ø£Ù† Ø§Ù„ØªØ­Ù‚Ù‚ ÙŠØªÙ… Ø§Ù„Ø¢Ù† Ø¹Ø¨Ø± ÙˆÙŠØ¨Ù‡ÙˆÙƒ
    // window.addEventListener('load', () => { ... });

    // --- Ø§Ù„Ù†ØµØ§Ø¦Ø­ ---
    const lifeTips = [
      ["ÙƒÙ† Ù„Ø·ÙŠÙØ§Ù‹ØŒ ÙØ§Ù„Ø¬Ù…ÙŠØ¹ ÙŠØ®ÙˆØ¶ Ù…Ø¹Ø±ÙƒØ© ØµØ¹Ø¨Ø©.", "Be kind, for everyone is fighting a hard battle."],
      ["Ù„Ø§ ØªØ¤Ø¬Ù„ Ù…Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ÙØ¹Ù„Ù‡ Ø§Ù„ÙŠÙˆÙ… Ø¥Ù„Ù‰ Ø§Ù„ØºØ¯.", "Don't put off what you can do today until tomorrow."]
    ];

    const medicalTips = [
      ["Ø§Ø´Ø±Ø¨ 8 Ø£ÙƒÙˆØ§Ø¨ Ù…Ø§Ø¡ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø±Ø·ÙˆØ¨Ø© Ø¬Ø³Ù…Ùƒ.", "Drink 8 glasses of water daily to stay hydrated."],
      ["Ù†Ù… 7-8 Ø³Ø§Ø¹Ø§Øª ÙƒÙ„ Ù„ÙŠÙ„Ø© Ù„ØµØ­Ø© Ø¹Ù‚Ù„ÙŠØ© ÙˆØ¬Ø³Ø¯ÙŠØ© Ø¬ÙŠØ¯Ø©.", "Sleep 7-8 hours every night for good mental and physical health."]
    ];

    function generateTips(container, tipsList, prefix) {
      try {
        for (let i = 1; i <= 1000; i++) {
          const idx = (i - 1) % tipsList.length;
          const [ar, en] = tipsList[idx];
          const tip = document.createElement('div');
          tip.className = 'tip';
          tip.innerHTML = `
            <div class="tip-ar">${ar}</div>
            <div class="tip-en">${en}</div>
            <div class="tip-actions">
              <button class="copy-btn" onclick="copyText(\`${ar}\\n${en}\`)">ğŸ“‹ Ù†Ø³Ø®</button>
            </div>
          `;
          container.appendChild(tip);
        }
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù†ØµØ§Ø¦Ø­:', error);
        container.innerHTML = '<div style="color: #e74c3c; text-align: center; padding: 10px;">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØµØ§Ø¦Ø­.</div>';
      }
    }

    function copyText(text) {
      try {
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.style.position = 'fixed';
        document.body.appendChild(ta);
        ta.focus();
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®!');
        // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
        logSecurityEvent('text_copy', `Copied text: ${text.substring(0, 50)}...`);
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ù†Øµ:', error);
        alert('ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ÙŠØ¯ÙˆÙŠÙ‹Ø§.');
        // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
        logSecurityEvent('text_copy_error', `Error: ${error.message}`);
      }
    }

    window.copyText = copyText;

    // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª ---
    let editingComment = null; // Ù…ØªØºÙŠØ± Ù„ØªØªØ¨Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ Ø§Ù„Ø¬Ø§Ø±ÙŠ ØªØ¹Ø¯ÙŠÙ„Ù‡

    function sendComment() {
      try {
        const text = commentInput.value.trim();
        if (!text) return;

        // âœ… ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Rate Limiting) - Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ·
        const now = Date.now();
        const lastCommentTime = sessionStorage.getItem('lastCommentTime');
        if (lastCommentTime && now - lastCommentTime < 5000) { // 5 Ø«ÙˆØ§Ù†Ù
          alert('ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± 5 Ø«ÙˆØ§Ù†Ù Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ ØªØ¹Ù„ÙŠÙ‚ Ø¢Ø®Ø±.');
          return;
        }
        sessionStorage.setItem('lastCommentTime', now);

        if (editingComment) {
          // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ¹Ù„ÙŠÙ‚
          const textSpan = editingComment.querySelector('.comment-text');
          textSpan.textContent = text;
          // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø²Ø±
          sendCommentBtn.textContent = 'Ø¥Ø±Ø³Ø§Ù„';
          editingComment = null;
          // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
          logSecurityEvent('comment_update', `Comment ID: ${editingComment.id}, Text: ${text}`);
        } else {
          // Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯
          const div = document.createElement('div');
          div.className = 'comment';
          div.id = 'comment_' + Date.now(); // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯

          const textSpan = document.createElement('div');
          textSpan.className = 'comment-text';
          textSpan.textContent = text;

          const actionsDiv = document.createElement('div');
          actionsDiv.className = 'comment-actions';

          const editBtn = document.createElement('button');
          editBtn.className = 'edit-comment-btn';
          editBtn.textContent = 'ØªØ¹Ø¯ÙŠÙ„';
          editBtn.onclick = function() {
            commentInput.value = textSpan.textContent;
            commentInput.style.height = 'auto';
            commentInput.style.height = Math.min(commentInput.scrollHeight, 120) + 'px';
            sendCommentBtn.textContent = 'ØªØ­Ø¯ÙŠØ«';
            editingComment = div;
          };

          const deleteBtn = document.createElement('button');
          deleteBtn.className = 'delete-comment-btn';
          deleteBtn.textContent = 'Ø­Ø°Ù';
          deleteBtn.onclick = function() {
            if (isAdminLoggedIn) {
              commentsList.removeChild(div);
              // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
              logSecurityEvent('comment_delete', `Comment ID: ${div.id}`);
            } else {
              alert('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ù„Ø­Ø°Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª.');
              // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
              logSecurityEvent('comment_delete_denied', `Attempt to delete comment ID: ${div.id} without admin rights`);
            }
          };

          actionsDiv.appendChild(editBtn);
          actionsDiv.appendChild(deleteBtn);
          div.appendChild(textSpan);
          div.appendChild(actionsDiv);
          commentsList.appendChild(div);
          // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
          logSecurityEvent('comment_add', `Text: ${text}`);
        }

        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
        commentInput.value = '';
        commentInput.style.height = '60px';
        commentsList.scrollTop = commentsList.scrollHeight;
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚.');
        // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
        logSecurityEvent('comment_error', `Error: ${error.message}`);
      }
    }

    // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØ³Ø¹ (Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©) ---
    commentInput.oninput = function() {
      try {
        this.style.height = 'auto';
        this.style.height = Math.min(this.scrollHeight, 120) + 'px';
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ø±ØªÙØ§Ø¹ Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚:', error);
      }
    };

    // --- Ø£ÙˆØ§Ù…Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ---
    el('clearAllCommentsBtn').onclick = () => {
      try {
        if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§ØªØŸ')) {
          commentsList.innerHTML = '';
          // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
          logSecurityEvent('comments_cleared', 'All comments were cleared by admin');
          alert('ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª.');
        }
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ù…Ø³Ø­ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø³Ø­ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª.');
        // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
        logSecurityEvent('comments_clear_error', `Error: ${error.message}`);
      }
    };

    // --- Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© ---
    profilePicInput.onchange = function(e) {
      if (!isAdminLoggedIn) {
        alert('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ø£ÙˆÙ„Ø§Ù‹.');
        // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
        logSecurityEvent('profile_pic_upload_denied', 'Attempt to upload profile picture without admin rights');
        return;
      }
      const file = e.target.files[0];
      if (!file) return;

      try {
        const reader = new FileReader();
        reader.onload = function(e) {
          mainProfilePic.src = e.target.result;
          mainProfilePic.style.display = 'block';
          alert('ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¨Ù†Ø¬Ø§Ø­.');
          // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
          logSecurityEvent('profile_pic_uploaded', `File: ${file.name}, Size: ${file.size} bytes`);
        };
        reader.readAsDataURL(file);
      } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©:', error);
        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©.');
        // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø¯Ø« Ø§Ù„Ø£Ù…Ù†ÙŠ
        logSecurityEvent('profile_pic_upload_error', `Error: ${error.message}`);
      }
    };

    // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© ---

    // âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ù…Ù†ÙŠØ© (Security Logging)
    // Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ÙŠÙ…ÙƒÙ† Ø£Ù† ØªÙØ³ØªØ®Ø¯Ù… Ù„Ø¬Ù…Ø¹ Ø§Ù„Ø³Ø¬Ù„Ø§Øª ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… Ù„ØªØ­Ù„ÙŠÙ„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§.
    function logSecurityEvent(eventType, details) {
      // ÙÙŠ Ø¨ÙŠØ¦Ø© Ø¥Ù†ØªØ§Ø¬ØŒ ÙŠÙ…ÙƒÙ† Ø¥Ø±Ø³Ø§Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø¥Ù„Ù‰ Ø®Ø§Ø¯Ù… Ø§Ù„Ø³Ø¬Ù„Ø§Øª
      const logEntry = {
        timestamp: new Date().toISOString(),
        eventType: eventType,
        details: details,
        userAgent: navigator.userAgent,
        // Ù„Ø§ ØªÙ‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ø£Ø¨Ø¯Ø§Ù‹
      };
      console.log('Security Event:', logEntry);
      // âœ… Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø¬Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… (ØªÙ… ØªØ¹Ø·ÙŠÙ„Ù‡ Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø±ÙŠØ©)
      // fetch('/api/log-event', {
      //   method: 'POST',
      //   headers: { 'Content-Type': 'application/json' },
      //   body: JSON.stringify(logEntry)
      // }).catch(err => console.error('ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø³Ø¬Ù„ Ø§Ù„Ø£Ù…Ø§Ù†:', err));
    }

    // âœ… ØªØ­Ø¯ÙŠØ¯ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Rate Limiting)
    // ØªÙ… ØªÙ†ÙÙŠØ° Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ· Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… `sessionStorage` ÙÙŠ Ø¯ÙˆØ§Ù„ `sendComment` Ùˆ `startPaymentForItem`.
    // ÙÙŠ Ø¨ÙŠØ¦Ø© Ø¥Ù†ØªØ§Ø¬ØŒ ÙŠØªÙ… ØªÙ†ÙÙŠØ° Ø°Ù„Ùƒ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø§Ø¯Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø¯ÙˆØ§Øª Ù…Ø«Ù„ nginx Ø£Ùˆ Express.js middleware.
  </script>

</body>
</html>
